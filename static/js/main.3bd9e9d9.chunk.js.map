{"version":3,"sources":["context/AuthContext.ts","constants/styles.js","components/Container.tsx","components/Header.tsx","assets/images/logo.png","assets/images/logout.svg","components/Popup.tsx","components/Input.tsx","@/todos/model.ts","api/request.ts","api/todo-api.ts","components/Task.tsx","components/Radio.tsx","components/Todo.tsx","helpers/helpers.ts","hooks/useAuth.ts","@/todos/init.ts","components/Loader.tsx","components/Linear.tsx","components/Button.tsx","pages/TodosPage.tsx","assets/images/grid.png","assets/images/facebook.png","assets/images/vk.png","assets/images/telegram.png","assets/images/logo.jpg","assets/images/left.png","assets/images/right.png","pages/AuthPage.tsx","hooks/useFetch.ts","App.tsx","routes.tsx","reportWebVitals.ts","index.tsx"],"names":["noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","COLORS","CustomContainer","styled","div","backgroundColor","Container","children","className","CustomHeader","Header","PopupWrapper","isOpen","customOffset","renameTodoPending","isAddTaskPending","renameTaskPending","Separator","Popup","items","map","item","index","onClick","handler","name","length","CustomInput","input","isEmpty","Input","placeholder","id","type","value","onChange","autoFocus","onBlur","onEnter","inputRef","style","onKeyPress","e","key","ref","$token","createStore","$todos","$newTodoName","$authError","$authMessage","$isLoaderVisible","$isRequestPending","clearAddNewTodoName","createEvent","getAllTodos","setToken","setAuthError","setAuthMessage","setTodos","setLoaderVisible","setRequestPending","onNewTodoNameChange","onAddNewTodo","onRemoveTodo","onRenameTodo","onAddNewTask","onRemoveTask","onRenameTask","onDragDropTask","request","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","getAllTodosFx","createEffect","result","Authorization","addNewTodoFx","renameTodoFx","eventData","todoId","removeTodoFx","addNewTaskFx","removeTaskFx","taskId","renameTaskFx","isCompleted","dragDropTaskFx","currentTodoId","targetTodoId","currentTaskId","targetTaskIndex","description","TaskWrapper","isRequestPending","Task","setAddTaskPending","useRef","useState","setInput","checkbox","setCheckbox","allowRenaming","setAllowRenaming","setRenameTaskPending","useEffect","onInputBlurEnter","addNewTask","current","focus","taskPopupItems","isOpenPopup","setPopupOpen","trim","document","addEventListener","outsideClickListener","popups","querySelectorAll","needClose","forEach","popup","contains","target","removeEventListener","done","watch","allTasks","useStore","isShowShadow","setShowShadow","display","onDragOver","preventDefault","dragOverHandler","onDragLeave","onDrop","targetTaskId","dataTransfer","getData","todos","getState","currentTodoIndex","findIndex","el","currentTaskIndex","tasks","targetTodoIndex","currentTask","find","dropHandler","draggable","onDragStart","setTimeout","setData","dragStartHandler","onDragEnter","currentTarget","dragTaskOverHandler","onDragEnd","dropEffect","dragEndHandler","textDecoration","color","checked","RadioWrapper","radioBackground","Radio","TodoWrapper","Todo","todoName","v1","all","progress","completed","setRenameTodoPending","radio","setRadio","chosenTasks","setChosenTasks","isLoaderVisible","filter","task","onRadioChange","todoPopupItems","allTodos","isShowTaskShadow","setShowTaskShadow","htmlFor","getInputValue","event","setPayload","state","payload","storageName","on","reset","sample","source","clock","pending","reverse","todo","fail","error","localStorage","removeItem","combine","fn","remainingTodos","remainingTasks","LoaderWrapper","Loader","width","height","viewBox","preserveAspectRatio","cx","cy","fill","stroke","strokeWidth","r","strokeDasharray","attributeName","repeatCount","dur","values","keyTimes","Linear","CustomButton","button","disabled","Button","NativeContainer","NativeButton","TodosPage","auth","useContext","history","useHistory","newTodoName","handleNewTodoNameChange","prepend","src","logo","alt","rel","href","push","AuthPage","loading","setLoading","setError","useCallback","clearError","useFetch","email","password","form","setForm","authMessage","authError","isEmailError","setEmailError","isPasswordError","setPasswordError","changeHandler","checkForEmpty","registerHandler","loginHandler","opacity","borderColor","left","right","position","App","ready","setReady","setUserId","jwtToken","setItem","parse","getItem","useAuth","routes","path","exact","to","useRoutes","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3bd9e9d9.chunk.js","sourcesContent":["import {createContext} from 'react'\r\n\r\ntype loginType = (x: string, y: number) => void;\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    userId: null,\r\n    login: noop as loginType,\r\n    logout: noop,\r\n    isAuthenticated: false\r\n})\r\n","\r\n\r\nexport const COLORS = {\r\n    base: '#1C1C24',\r\n    darkMain: '#131419',\r\n    greyMain:'#5F5F6E',\r\n    blueMain: '#2b2bc6',\r\n    aqua: '#235b59',\r\n\r\n    lightGrey: '#FAFBFC',\r\n    grey: '#DFE1E6',\r\n    blue: '#5684f6',\r\n    white: '#ffffff',\r\n    green: '#5AAC44',\r\n    orange: '#ffa500',\r\n};\r\n","import React from 'react'\r\nimport styled from 'styled-components';\r\nimport {COLORS} from \"../constants/styles\";\r\n\r\nconst CustomContainer = styled.div`\r\n  position: relative;\r\n  z-index: 0;\r\n  width: 100%;\r\n  height: 100vh;\r\n  font-family: \"Comic Sans MS\", sans-serif;\r\n  background-color: ${({backgroundColor}: CustomContainerProps) => backgroundColor || COLORS.base};\r\n`;\r\n\r\nexport const Container = ({children, backgroundColor, className}: { children: any, backgroundColor?: string, className?: string }) => {\r\n    return (\r\n        <CustomContainer className={className} backgroundColor={backgroundColor}>\r\n            {children}\r\n        </CustomContainer>\r\n    )\r\n}\r\n\r\n\r\ntype CustomContainerProps = {\r\n    backgroundColor?: string\r\n    className?: string\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components';\r\nimport {COLORS} from \"../constants/styles\";\r\n\r\nconst CustomHeader = styled.div`\r\n  width: 100%;\r\n  height: 80px;\r\n  background: ${({backgroundColor}:CustomContainerProps) => backgroundColor || COLORS.base};\r\n`;\r\n\r\nexport const Header = ({children, backgroundColor, className}: { children?: any,backgroundColor?:string, className?:string }) => {\r\n\r\n    return (\r\n        <CustomHeader backgroundColor={backgroundColor} className={className}>\r\n            {children}\r\n        </CustomHeader>\r\n    )\r\n}\r\n\r\n\r\ntype CustomContainerProps = {\r\n    backgroundColor?: string\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.e3e802a8.png\";","export default __webpack_public_path__ + \"static/media/logout.a44263bd.svg\";","import React, {Fragment} from 'react'\r\nimport styled from \"styled-components\";\r\nimport {COLORS} from \"../constants/styles\";\r\nimport '../assets/styles/components/_popup.scss';\r\n\r\nexport const PopupWrapper = styled.div`\r\n  display: ${({isOpen}: PopupWrapperPropsType) => isOpen ? 'flex' : 'none'};\r\n  position: absolute;\r\n  z-index: 1000;\r\n  top: 14px;\r\n  right: ${({customOffset}) => customOffset ? '35px' : '-90px'};\r\n  \r\n  width: 100px;\r\n  min-height: ${({renameTodoPending, isAddTaskPending, renameTaskPending}: PopupWrapperPropsType) => (renameTodoPending || isAddTaskPending || renameTaskPending) ? '40px' : '80px'};\r\n  background-color: ${() => COLORS.base};\r\n  border: 2px solid #262631;\r\n  border-radius: 10px;\r\n  \r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n`;\r\nconst Separator = styled.div`\r\n  width: 80px;\r\n  height: 1px;\r\n  background-color: #262631;\r\n`;\r\nexport const Popup = ({isOpen, className, items, renameTodoPending, isAddTaskPending, renameTaskPending,customOffset }: PopupProps) => {\r\n    return (\r\n        <PopupWrapper className={className} isOpen={isOpen} items={items} renameTodoPending={renameTodoPending}\r\n                      isAddTaskPending={isAddTaskPending} renameTaskPending={renameTaskPending}\r\n                      customOffset={customOffset}\r\n        >\r\n            {\r\n                items!.map((item, index) =>\r\n                    (\r\n                        <Fragment key={index}>\r\n                            <div className='todo-popup-btn' onClick={item.handler}>{item.name}</div>\r\n                            {\r\n                                index !== items!.length - 1 && <Separator/>\r\n                            }\r\n                        </Fragment>\r\n                    )\r\n                )\r\n            }\r\n        </PopupWrapper>\r\n    )\r\n}\r\n\r\n\r\ntype PopupProps = {\r\n    className: string\r\n    isOpen?: boolean\r\n    items?: Array<any>\r\n    renameTodoPending?: boolean\r\n    isAddTaskPending?: boolean\r\n    renameTaskPending?: boolean\r\n    customOffset?: string\r\n\r\n}\r\n\r\ntype PopupWrapperPropsType = {\r\n    isOpen?: boolean\r\n    items?: Array<any>\r\n    renameTodoPending?: boolean\r\n    isAddTaskPending?: boolean\r\n    renameTaskPending?: boolean\r\n    customOffset?: string\r\n}\r\n","import React, {DetailedHTMLProps, InputHTMLAttributes} from 'react'\r\nimport styled from 'styled-components';\r\nimport {COLORS} from \"../constants/styles\";\r\n\r\nconst CustomInput = styled.input`\r\n   max-width: 400px;\r\n   width: 100%;\r\n   height: 44px;\r\n   padding: .5em;\r\n   margin: 0 0 1.2em;\r\n   background-color: ${({}: InputPropsType) => COLORS.lightGrey};\r\n   border: 2px solid ${({isEmpty}: InputPropsType) => isEmpty ? 'red' : COLORS.grey};\r\n   font-size: 14px;\r\n   border-radius: 3px;\r\n   transition: background-color .2s ease-in-out 0s, border-color .2s ease-in-out 0s;\r\n \r\n  &:focus {\r\n    background-color: ${() => COLORS.white};\r\n    border-color: ${({}: InputPropsType) => COLORS.blue};\r\n  }\r\n`;\r\n\r\nexport const Input =\r\n    ({\r\n         placeholder,\r\n         id,\r\n         type,\r\n         name,\r\n         className,\r\n         value,\r\n         onChange,\r\n         autoFocus,\r\n         onBlur,\r\n         onEnter,\r\n         inputRef,\r\n         style,\r\n     }: InputPropsType) => {\r\n\r\n        const onEnterPress = (e: any) => {\r\n            if (e.key === 'Enter') {\r\n                onEnter && onEnter()\r\n            }\r\n        }\r\n\r\n        return (\r\n            <CustomInput\r\n                placeholder={placeholder}\r\n                id={id}\r\n                type={type}\r\n                name={name}\r\n                className={className}\r\n                value={value}\r\n                onChange={onChange}\r\n                autoFocus={autoFocus}\r\n                onBlur={onBlur}\r\n                onKeyPress={onEnterPress}\r\n                ref={inputRef}\r\n                style={style}\r\n            />\r\n        )\r\n    }\r\n\r\nexport type InputPropsType = DetailedHTMLProps<InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>\r\n    & { onEnter?: () => void, error?: string, inputRef?: any, isEmpty?: any, style? :any };\r\n","import {createEvent, createStore} from \"effector\";\r\nimport {MouseEvent} from 'react';\r\n\r\n\r\nexport const $token = createStore<string | null>(null);\r\nexport const $todos = createStore<Array<any>>([]);\r\nexport const $newTodoName = createStore<string>('');\r\nexport const $authError = createStore<string | null>('');\r\nexport const $authMessage = createStore<string | null>('');\r\nexport const $isLoaderVisible = createStore<boolean>(false);\r\nexport const $isRequestPending = createStore<boolean>(false);\r\n\r\n\r\nexport const clearAddNewTodoName = createEvent();\r\n\r\nexport const getAllTodos = createEvent()\r\n\r\nexport const setToken = createEvent<string | null>();\r\nexport const setAuthError = createEvent<string | null>();\r\nexport const setAuthMessage = createEvent<string | null>();\r\nexport const setTodos = createEvent<Array<Object>>();\r\nexport const setLoaderVisible = createEvent<boolean>();\r\nexport const setRequestPending = createEvent<boolean>();\r\n\r\nexport const onNewTodoNameChange = createEvent<string>();\r\nexport const onAddNewTodo = createEvent<MouseEvent<HTMLButtonElement>>();\r\nexport const onRemoveTodo = createEvent<string>();\r\nexport const onRenameTodo = createEvent<{}>();\r\nexport const onAddNewTask = createEvent<{}>();\r\nexport const onRemoveTask = createEvent<{}>();\r\nexport const onRenameTask = createEvent<{}>();\r\nexport const onDragDropTask = createEvent<{}>();\r\n","\r\nexport const request = async (url: string, method = 'GET', body = null as any, headers: any = {\r\n    'Content-Type': 'application/json',\r\n}) => {\r\n    try {\r\n        if (body) {\r\n            body = JSON.stringify(body);\r\n            headers['Content-Type'] = 'application/json';\r\n        }\r\n\r\n        const response = await fetch(`https://todo-backend-node-js.herokuapp.com${url}`, {method, body, headers});\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n            throw new Error(data.message || 'Error is occurred');\r\n        }\r\n\r\n        return data;\r\n    } catch (e) {\r\n        throw e;\r\n    }\r\n}\r\n","import {createEffect} from \"effector\";\r\nimport {request} from \"./request\";\r\n\r\n\r\nexport const getAllTodosFx = createEffect(\r\n    async (token: string | null) => {\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/todos',\r\n                'GET',\r\n                null,\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const addNewTodoFx = createEffect(\r\n    async (data: Array<any>) => {\r\n        const [name, token] = data;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/todos',\r\n                'POST',\r\n                {name},\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const renameTodoFx = createEffect(\r\n    async (data: any) => {\r\n        const [token, eventData] = data;\r\n        const {name, todoId} = eventData;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/todos',\r\n                'PUT',\r\n                {\r\n                    name,\r\n                    todoId,\r\n                },\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const removeTodoFx = createEffect(\r\n    async (data: any) => {\r\n        const [token, todoId] = data;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/todos',\r\n                'DELETE',\r\n                {todoId},\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const addNewTaskFx = createEffect(\r\n    async (data: any) => {\r\n        const [token, eventData] = data;\r\n        const {name, todoId} = eventData;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/tasks',\r\n                'POST',\r\n                {\r\n                    name,\r\n                    todoId\r\n                },\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const removeTaskFx = createEffect(\r\n    async (data: any) => {\r\n        const [token, eventData] = data;\r\n        const {todoId, id} = eventData;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/tasks',\r\n                'DELETE',\r\n                {\r\n                    todoId,\r\n                    taskId: id\r\n                },\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const renameTaskFx = createEffect(\r\n    async (data: any) => {\r\n        const [token, eventData] = data;\r\n        const {name, todoId, taskId, isCompleted} = eventData;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/tasks',\r\n                'PUT',\r\n                {\r\n                    name,\r\n                    todoId,\r\n                    taskId,\r\n                    isCompleted\r\n                },\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n\r\nexport const dragDropTaskFx = createEffect(\r\n    async (data: any) => {\r\n        const [token, eventData] = data;\r\n        const {\r\n            currentTodoId,\r\n            targetTodoId,\r\n            currentTaskId,\r\n            targetTaskIndex,\r\n            name,\r\n            description,\r\n            isCompleted\r\n        } = eventData;\r\n        let result = null;\r\n        try {\r\n            result = await request(\r\n                '/api/drag&Drop',\r\n                'PUT',\r\n                {\r\n                    currentTodoId,\r\n                    targetTodoId,\r\n                    currentTaskId,\r\n                    targetTaskIndex,\r\n                    name,\r\n                    description,\r\n                    isCompleted\r\n                },\r\n                {Authorization: `Bearer ${token}`});\r\n            return result;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n);\r\n","import React, {ChangeEvent, DragEvent, useEffect, useRef, useState} from 'react'\r\nimport styled from \"styled-components\";\r\nimport {COLORS} from \"../constants/styles\";\r\nimport '../assets/styles/components/_task.scss';\r\nimport {Popup} from \"./Popup\";\r\nimport {Input} from \"./Input\";\r\nimport {$isRequestPending, $todos, onAddNewTask, onDragDropTask, onRemoveTask, onRenameTask} from \"../@/todos/model\";\r\nimport {renameTaskFx} from \"../api/todo-api\";\r\nimport {useStore} from \"effector-react\";\r\n\r\nconst TaskWrapper = styled.div`\r\n  cursor: ${({isRequestPending}: TaskWrapperProps) => isRequestPending ? 'initial' : 'pointer'};\r\n  min-height: 20px;\r\n  border-radius: 15px;\r\n  background-color: ${({backgroundColor}: TaskWrapperProps) => backgroundColor || COLORS.aqua};\r\n`;\r\nexport const Task = ({id, isAddTaskPending, todoId, name, setAddTaskPending, isCompleted}: TaskProps) => {\r\n\r\n    const inputRef = useRef<any>();\r\n\r\n    const [input, setInput] = useState('');\r\n    const [checkbox, setCheckbox] = useState(false);\r\n    const [allowRenaming, setAllowRenaming] = useState(false);\r\n    const [renameTaskPending, setRenameTaskPending] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (renameTaskPending && name) {\r\n            setInput(name);\r\n        }\r\n    }, [renameTaskPending]);\r\n\r\n    useEffect(() => {\r\n        if (isCompleted) {\r\n            setCheckbox(isCompleted)\r\n        }\r\n    }, [isCompleted])\r\n\r\n    const onInputBlurEnter = () => {\r\n        if (isAddTaskPending) {\r\n            addNewTask()\r\n        } else if (renameTaskPending && !allowRenaming) {\r\n            inputRef.current.focus();\r\n        } else if (renameTaskPending && allowRenaming) {\r\n            onRenameTask({name: input, todoId, taskId: id});\r\n        }\r\n    }\r\n    const removeTask = () => {\r\n        onRemoveTask({todoId, id});\r\n    }\r\n    const cancelTaskAdding = () => {\r\n        if (isAddTaskPending) {\r\n            setAddTaskPending!(false);\r\n        }\r\n        if (renameTaskPending) {\r\n            setRenameTaskPending(false)\r\n        }\r\n\r\n    }\r\n\r\n    const renameTask = () => {\r\n        setRenameTaskPending(true);\r\n    }\r\n    let taskPopupItems = [{name: 'Rename', handler: renameTask}, {\r\n        name: 'Remove',\r\n        handler: removeTask\r\n    }];\r\n    if (!id || renameTaskPending) {\r\n        taskPopupItems = [{name: 'Cancel', handler: cancelTaskAdding}]\r\n    }\r\n\r\n\r\n    const [isOpenPopup, setPopupOpen] = useState(false);\r\n    const onOpenClosePopup = () => {\r\n        setPopupOpen(!isOpenPopup);\r\n        document.removeEventListener('click', outsideClickListener);\r\n    }\r\n\r\n    const addNewTask = () => {\r\n        if (input.trim()) {\r\n            onAddNewTask({name: input, todoId});\r\n        } else {\r\n            inputRef.current.focus();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', outsideClickListener);\r\n    }, [isOpenPopup]);\r\n\r\n    const outsideClickListener = (e: any) => {\r\n        const popups = document.querySelectorAll('.popup');\r\n\r\n        if (popups && isOpenPopup) {\r\n            let needClose = true;\r\n            popups.forEach(popup => {\r\n                if (popup.contains(e.target)) {\r\n                    needClose = false;\r\n                }\r\n            })\r\n            if (needClose) {\r\n                setPopupOpen(false);\r\n                document.removeEventListener('click', outsideClickListener);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    const onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (renameTaskPending && e.target.value.trim()) {\r\n            setAllowRenaming(true)\r\n        }\r\n        setInput(e.target.value)\r\n    }\r\n\r\n    renameTaskFx.done.watch((result) => {\r\n        if (result && result.result && result.result.allTasks.length) {\r\n            setRenameTaskPending(false);\r\n        }\r\n    });\r\n\r\n    const onCheckboxChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        onRenameTask({name, isCompleted: e.target.checked, input, todoId, taskId: id});\r\n        setCheckbox(e.target.checked)\r\n    }\r\n\r\n\r\n    const dragStartHandler = (e: DragEvent<HTMLDivElement>, todoId: string | undefined | null, id: string | undefined | null) => {\r\n        const target = e.target as HTMLDivElement;\r\n\r\n        setTimeout(function () {\r\n            target.style.display = 'none';\r\n        }, 0);\r\n\r\n        if (todoId) {\r\n            e.dataTransfer.setData('currentTodoId', todoId);\r\n        }\r\n        if (id) {\r\n            e.dataTransfer.setData('currentTaskId', id);\r\n        }\r\n    }\r\n\r\n    const dragOverHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault();\r\n    }\r\n    const dragTaskOverHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault();\r\n        // const target = e.target as HTMLDivElement;\r\n        // if (e.currentTarget === target) return\r\n        // setShowShadow(true);\r\n    }\r\n\r\n    const dragEnterHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault();\r\n        const target = e.target as HTMLDivElement;\r\n        if (e.currentTarget === target) return\r\n        setShowShadow(true);\r\n\r\n    }\r\n\r\n    const dragLeaveHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        setShowShadow(false);\r\n    }\r\n\r\n    const dropHandler = (e: DragEvent<HTMLDivElement>, targetTodoId: string | null | undefined, targetTaskId: string | null | undefined) => {\r\n        e.preventDefault();\r\n        setShowShadow(false);\r\n        const currentTodoId = e.dataTransfer.getData('currentTodoId');\r\n        const currentTaskId = e.dataTransfer.getData('currentTaskId');\r\n\r\n        const todos = $todos.getState();\r\n        let currentTodoIndex = todos.findIndex(el => el.id === currentTodoId);\r\n        let currentTaskIndex = todos[currentTodoIndex].tasks.findIndex((el: any) => el.id === currentTaskId);\r\n        let targetTodoIndex = todos.findIndex(el => el.id === targetTodoId);\r\n        let targetTaskIndex = todos[targetTodoIndex].tasks.findIndex((el: any) => el.id === targetTaskId);\r\n\r\n        const currentTask = todos[currentTodoIndex].tasks.find((el: any) => el.id === currentTaskId);\r\n\r\n\r\n        // all arrays are reversed now, need to get actual ids\r\n        ;(function reverseIds() {\r\n            targetTaskIndex = todos[targetTodoIndex].tasks.length - 1 - targetTaskIndex;\r\n            currentTaskIndex = todos[currentTodoIndex].tasks.length - 1 - currentTaskIndex;\r\n        }())\r\n\r\n        if (currentTodoId === targetTodoId) {\r\n            if (currentTaskIndex < targetTaskIndex) {\r\n                targetTaskIndex -= 1\r\n            }\r\n        }\r\n\r\n        targetTaskIndex += 1;\r\n\r\n        onDragDropTask({\r\n            currentTodoId,\r\n            targetTodoId,\r\n            currentTaskId,\r\n            targetTaskIndex,\r\n            name: currentTask.name,\r\n            description: currentTask.description,\r\n            isCompleted: currentTask.isCompleted\r\n        })\r\n    }\r\n\r\n    const dragEndHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        const target = e.target as HTMLDivElement;\r\n        if (e.dataTransfer.dropEffect === 'none') {\r\n            target.style.display = 'flex';\r\n        }\r\n\r\n        setShowShadow(false);\r\n    }\r\n    const isRequestPending = useStore($isRequestPending);\r\n    const [isShowShadow, setShowShadow] = useState(false);\r\n\r\n    return (\r\n        <>\r\n            {\r\n                <div\r\n                    style={isShowShadow ? {display: 'flex'} : {display: 'none'}}\r\n                    className='task-shadow'\r\n                    onDragOver={(e) => dragOverHandler(e)}\r\n                    onDragLeave={dragLeaveHandler}\r\n                    onDrop={(e) => dropHandler(e, todoId, id)}\r\n                />\r\n            }\r\n            <TaskWrapper\r\n                style={checkbox ? {backgroundColor: 'rgba(35,91,89, 0.5)'} : {}}\r\n                className=\"task\"\r\n                draggable={!isRequestPending}\r\n                onDragStart={(e) => dragStartHandler(e, todoId, id)}\r\n                onDragEnter={dragEnterHandler}\r\n                onDragOver={(e) => dragTaskOverHandler(e)}\r\n                onDragEnd={(e) => dragEndHandler(e)}\r\n                isRequestPending={isRequestPending}\r\n            >\r\n\r\n                <Popup className='popup'\r\n                       isOpen={isOpenPopup}\r\n                       items={taskPopupItems}\r\n                       renameTaskPending={renameTaskPending}\r\n                       isAddTaskPending={isAddTaskPending}\r\n                       customOffset={'35px'}\r\n                />\r\n                <div className='task-body'>\r\n                    {isAddTaskPending || renameTaskPending ?\r\n                        <Input autoFocus\r\n                               className=\"task-title__input\"\r\n                               type=\"text\"\r\n                               value={input}\r\n                               onChange={onInputChange}\r\n                               onBlur={onInputBlurEnter}\r\n                               onEnter={onInputBlurEnter}\r\n                               inputRef={inputRef}\r\n                        />\r\n                        :\r\n                        <div className=\"task-title\"\r\n                             style={checkbox ? {textDecoration: 'line-through', color: 'red'} : {}}>\r\n                            {name}\r\n                        </div>\r\n                    }\r\n                    <input checked={checkbox} onChange={onCheckboxChange} className='checkbox' type=\"checkbox\"/>\r\n                </div>\r\n                <div className=\"task-label\" onClick={onOpenClosePopup}>\r\n                    <div className=\"task-dot\"/>\r\n                    <div className=\"task-dot\"/>\r\n                    <div className=\"task-dot\"/>\r\n                </div>\r\n\r\n            </TaskWrapper>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\ntype TaskProps = {\r\n    id?: string\r\n    isAddTaskPending?: boolean\r\n    todoId?: string\r\n    name?: string\r\n    setAddTaskPending?: (isPending: boolean) => void\r\n    isCompleted?: boolean | null\r\n}\r\n\r\ntype TaskWrapperProps = {\r\n    backgroundColor?: string;\r\n    className?: string;\r\n    isRequestPending?: boolean\r\n}\r\n","import React, {ChangeEvent} from 'react'\r\nimport styled from \"styled-components\";\r\nimport {COLORS} from \"../constants/styles\";\r\nimport '../assets/styles/components/_radio.scss';\r\n\r\nexport const RadioWrapper = styled.input`\r\n  visibility: hidden;\r\n  cursor:pointer;\r\n  width: 15px;\r\n  height: 15px;\r\n  color: ${({}: RadioWrapperProps) => COLORS.green};\r\n  background-color: ${({backgroundColor}: RadioWrapperProps) => backgroundColor || COLORS.aqua};\r\n  \r\n  &:after {\r\n        width: 14px;\r\n        height: 14px;\r\n        border-radius: 15px;\r\n        top: -2px;\r\n        left: -1px;\r\n        position: relative;\r\n        z-index: 1;\r\n        background-color: #ffffff;\r\n        content: '';\r\n        display: inline-block;\r\n        visibility: visible;\r\n        border: 2px solid white;\r\n    }\r\n\r\n    &:checked:after {\r\n        width: 14px;\r\n        height: 14px;\r\n        border-radius: 15px;\r\n        top: -2px;\r\n        left: -1px;\r\n        position: relative;\r\n        z-index: 1;\r\n        background-color: ${({radioBackground}) => radioBackground || COLORS.orange};\r\n        content: '';\r\n        display: inline-block;\r\n        visibility: visible;\r\n        border: 2px solid white;\r\n    }\r\n \r\n`;\r\nexport const Radio = ({name, checked, value, id, onChange, radioBackground}: RadioProps) => {\r\n    return (\r\n        <RadioWrapper\r\n            className=\"radio\"\r\n            type=\"radio\"\r\n            name={name}\r\n            checked={checked}\r\n            value={value}\r\n            id={id}\r\n            onChange={onChange}\r\n            radioBackground={radioBackground}\r\n        />\r\n    )\r\n}\r\n\r\n\r\ntype RadioProps = {\r\n    id?: string\r\n    name: string\r\n    checked?: boolean\r\n    value?: string\r\n    onChange?: (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => void\r\n    radioBackground?: string\r\n}\r\n\r\ntype RadioWrapperProps = {\r\n    id?: string\r\n    backgroundColor?: string\r\n    className?: string\r\n    name: string\r\n    checked?: boolean\r\n    value?: string\r\n    onChange?: (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => void\r\n    radioBackground?: string\r\n}\r\n","import React, {ChangeEvent, DragEvent, useEffect, useRef, useState} from 'react'\r\nimport styled from \"styled-components\";\r\nimport {COLORS} from \"../constants/styles\";\r\nimport '../assets/styles/components/_todo.scss';\r\nimport {Task} from \"./Task\";\r\nimport {Radio} from \"./Radio\";\r\nimport {v1} from \"uuid\";\r\nimport {Popup} from \"./Popup\";\r\nimport {\r\n    $isLoaderVisible,\r\n    $isRequestPending,\r\n    $todos,\r\n    onDragDropTask,\r\n    onRemoveTodo,\r\n    onRenameTodo\r\n} from \"../@/todos/model\";\r\nimport {addNewTaskFx, renameTodoFx} from \"../api/todo-api\";\r\nimport {Input} from \"./Input\";\r\nimport {useStore} from \"effector-react\";\r\n\r\n\r\nconst TodoWrapper = styled.div`\r\n  position: relative;\r\n  \r\n  width: 280px;\r\n  // min-height: 50px;\r\n  border-radius: 15px;\r\n  background-color: ${({backgroundColor}: TodoWrapperProps) => backgroundColor || COLORS.base};\r\n`;\r\n\r\nexport const Todo = ({id, todoName, tasks}: TodoProps) => {\r\n\r\n    // Radio\r\n    const name = v1();\r\n    const all = v1();\r\n    const progress = v1();\r\n    const completed = v1();\r\n\r\n    const inputRef = useRef<any>();\r\n    const [input, setInput] = useState('');\r\n    const [renameTodoPending, setRenameTodoPending] = useState(false);\r\n    const [isOpenPopup, setPopupOpen] = useState(false);\r\n    const [allowRenaming, setAllowRenaming] = useState(false);\r\n    const [radio, setRadio] = useState<string>('All');\r\n    const [chosenTasks, setChosenTasks] = useState<any>([]);\r\n    const isLoaderVisible = useStore($isLoaderVisible);\r\n    const isRequestPending = useStore($isRequestPending);\r\n\r\n\r\n    useEffect(() => {\r\n        switch (radio) {\r\n            case 'All': {\r\n                setChosenTasks(tasks);\r\n                break;\r\n            }\r\n            case 'Progress': {\r\n                setChosenTasks(tasks.filter((task: any) => !task.isCompleted));\r\n                break;\r\n            }\r\n            case 'Completed': {\r\n                setChosenTasks(tasks.filter((task: any) => task.isCompleted));\r\n                break;\r\n            }\r\n\r\n        }\r\n    }, [radio, tasks])\r\n\r\n\r\n    const onRadioChange = (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n        const {value} = e.target;\r\n        setRadio(value);\r\n    }\r\n    const onOpenClosePopup = () => {\r\n        setPopupOpen(!isOpenPopup);\r\n        document.removeEventListener('click', outsideClickListener);\r\n    }\r\n\r\n    const onTodoRemove = () => {\r\n        onRemoveTodo(id);\r\n        setPopupOpen(false);\r\n        document.removeEventListener('click', outsideClickListener);\r\n    }\r\n\r\n    const [isAddTaskPending, setAddTaskPending] = useState(false);\r\n    const onAddTask = () => {\r\n        setAddTaskPending(true);\r\n        setPopupOpen(false);\r\n        document.removeEventListener('click', outsideClickListener);\r\n    }\r\n\r\n    const renameTodo = () => {\r\n        setRenameTodoPending(true);\r\n    }\r\n\r\n    const cancelTodoAdding = () => {\r\n        if (renameTodoPending) {\r\n            setRenameTodoPending(false)\r\n        }\r\n    }\r\n\r\n    let todoPopupItems = [{name: 'Add task', handler: onAddTask}, {\r\n        name: 'Rename',\r\n        handler: renameTodo\r\n    },\r\n        {\r\n            name: 'Remove',\r\n            handler: onTodoRemove\r\n        }];\r\n\r\n    if (renameTodoPending) {\r\n        todoPopupItems = [{name: 'Cancel', handler: cancelTodoAdding}]\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', outsideClickListener);\r\n    }, [isOpenPopup]);\r\n\r\n    const outsideClickListener = (e: any) => {\r\n        const popups = document.querySelectorAll('.popup');\r\n\r\n        if (popups && isOpenPopup) {\r\n            let needClose = true;\r\n            popups.forEach(popup => {\r\n                if (popup.contains(e.target)) {\r\n                    needClose = false;\r\n                }\r\n            })\r\n            if (needClose) {\r\n                setPopupOpen(false);\r\n                document.removeEventListener('click', outsideClickListener);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    const onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (renameTodoPending && e.target.value.trim()) {\r\n            setAllowRenaming(true)\r\n        }\r\n        setInput(e.target.value)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (renameTodoPending && todoName) {\r\n            setInput(todoName);\r\n        }\r\n    }, [renameTodoPending])\r\n\r\n    const onInputBlurEnter = () => {\r\n        if (renameTodoPending && !allowRenaming) {\r\n            inputRef.current.focus();\r\n        } else if (renameTodoPending && allowRenaming) {\r\n            onRenameTodo({name: input, todoId: id});\r\n        }\r\n    }\r\n\r\n    addNewTaskFx.done.watch((result) => {\r\n        if (result && result.result && result.result.allTasks.length) {\r\n            setAddTaskPending(false);\r\n        }\r\n    });\r\n\r\n    renameTodoFx.done.watch((result) => {\r\n        if (result && result.result && result.result.allTodos.length) {\r\n            setRenameTodoPending(false);\r\n        }\r\n    });\r\n\r\n    const [isShowTaskShadow, setShowTaskShadow] = useState(false);\r\n\r\n    const dragEnterHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        if (tasks.length) return;\r\n        setShowTaskShadow(true)\r\n    }\r\n    const dragOverHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        if (tasks.length) return;\r\n        e.preventDefault();\r\n    }\r\n    const dragLeaveHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        if (tasks.length) return;\r\n        setShowTaskShadow(false)\r\n    }\r\n    const dropHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        if (tasks.length) return;\r\n        e.preventDefault();\r\n        setShowTaskShadow(false);\r\n        const currentTodoId = e.dataTransfer.getData('currentTodoId');\r\n        const currentTaskId = e.dataTransfer.getData('currentTaskId');\r\n\r\n        const todos = $todos.getState();\r\n        let currentTodoIndex = todos.findIndex(el => el.id === currentTodoId);\r\n        const currentTask = todos[currentTodoIndex].tasks.find((el: any) => el.id === currentTaskId);\r\n\r\n        onDragDropTask({\r\n            currentTodoId,\r\n            targetTodoId: id,\r\n            currentTaskId,\r\n            targetTaskIndex: 0,\r\n            name: currentTask.name,\r\n            description: currentTask.description,\r\n            isCompleted: currentTask.isCompleted\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <TodoWrapper\r\n            className=\"todo\"\r\n            onDragEnter={dragEnterHandler}\r\n            onDragOver={dragOverHandler}\r\n            onDrop={dropHandler}\r\n        >\r\n\r\n            <Popup className='popup' isOpen={isOpenPopup} items={todoPopupItems} renameTodoPending={renameTodoPending}/>\r\n\r\n            <div className=\"todo-header\">\r\n                {\r\n                    renameTodoPending ?\r\n                        <Input autoFocus\r\n                               className=\"todo-title__input\"\r\n                               type=\"text\"\r\n                               value={input}\r\n                               onChange={onInputChange}\r\n                               onBlur={onInputBlurEnter}\r\n                               onEnter={onInputBlurEnter}\r\n                               inputRef={inputRef}\r\n                        /> :\r\n                        <div className=\"todo-title\">\r\n                            {todoName}\r\n                            {/*Tran Mau Tri Tam*/}\r\n                        </div>\r\n                }\r\n                <div className=\"menu-icon\" onClick={onOpenClosePopup}>\r\n                    <div style={isOpenPopup ? {backgroundColor: '#fff'} : {}} className=\"todo-dot\"/>\r\n                    <div style={isOpenPopup ? {backgroundColor: '#fff'} : {}} className=\"todo-dot\"/>\r\n                    <div style={isOpenPopup ? {backgroundColor: '#fff'} : {}} className=\"todo-dot\"/>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"todo-task-group\">\r\n                <label htmlFor={all} className=\"todo-label\">\r\n                    All\r\n                    <Radio id={all} name={name} value=\"All\" onChange={onRadioChange} checked={radio === \"All\"}\r\n                           radioBackground={COLORS.blueMain}/>\r\n                </label>\r\n                <label htmlFor={progress} className=\"todo-label\">\r\n                    Progress\r\n                    <Radio id={progress} name={name} value=\"Progress\" onChange={onRadioChange}\r\n                           checked={radio === \"Progress\"} radioBackground={COLORS.orange}/>\r\n                </label>\r\n                <label htmlFor={completed} className=\"todo-label\">\r\n                    Completed\r\n                    <Radio id={completed} name={name} value=\"Completed\" onChange={onRadioChange}\r\n                           checked={radio === \"Completed\"} radioBackground={COLORS.green}/>\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"todo-main\">\r\n                {\r\n                    !isRequestPending && !isLoaderVisible && !tasks.length &&\r\n                    <div className=\"no-tasks\">\r\n                        No tasks added\r\n                    </div>\r\n                }\r\n\r\n                {\r\n                    isAddTaskPending && <Task isAddTaskPending todoId={id} setAddTaskPending={setAddTaskPending}/>\r\n                }\r\n                {\r\n                    isShowTaskShadow && !tasks.length &&\r\n                    <div\r\n                        className='task-shadow'\r\n                        // onDragOver={(e) => dragOverHandler(e)}\r\n                        // onDragEnter={dragEnterTaskHandler}\r\n                        onDragLeave={dragLeaveHandler}\r\n                        // onDrop={(e) => dropHandler(e, todoId, id)}\r\n                    />\r\n                }\r\n                {\r\n                    chosenTasks?.map((task: any) =>\r\n                        (\r\n                            <Task key={task.id} id={task.id} todoId={id} name={task.name}\r\n                                  isCompleted={task.isCompleted}\r\n                            />\r\n                        )\r\n                    )\r\n                }\r\n            </div>\r\n\r\n        </TodoWrapper>\r\n    )\r\n}\r\n\r\n\r\ntype TodoProps = {\r\n    todoName: string\r\n    tasks?: any\r\n    id: string\r\n}\r\n\r\ntype TodoWrapperProps = {\r\n    backgroundColor?: string;\r\n    className?: string;\r\n}\r\n","import { ChangeEvent } from 'react';\r\n\r\nexport const getInputValue = (event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>): string =>\r\n  event.target.value;\r\n\r\nexport const setPayload = <Payload = unknown>(\r\n    state: unknown,\r\n    payload: Payload\r\n): Payload => payload;\r\n","import {useState, useCallback, useEffect} from 'react'\r\n\r\nexport const storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n    const [userId, setUserId] = useState(null)\r\n\r\n    const login = useCallback((jwtToken, id) => {\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n\r\n        localStorage.setItem(storageName, JSON.stringify({\r\n            userId: id, token: jwtToken\r\n        }))\r\n    }, [])\r\n\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null)\r\n        setUserId(null)\r\n        localStorage.removeItem(storageName)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName) as string)\r\n\r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        }\r\n        setReady(true)\r\n    }, [login])\r\n\r\n\r\n    return {login, logout, token, userId, ready}\r\n}\r\n","import {\r\n    $authError,\r\n    $authMessage, $isLoaderVisible,\r\n    $isRequestPending,\r\n    $newTodoName,\r\n    $todos,\r\n    $token,\r\n    clearAddNewTodoName,\r\n    getAllTodos,\r\n    onAddNewTask,\r\n    onAddNewTodo,\r\n    onDragDropTask,\r\n    onNewTodoNameChange,\r\n    onRemoveTask,\r\n    onRemoveTodo,\r\n    onRenameTask,\r\n    onRenameTodo,\r\n    setAuthError,\r\n    setAuthMessage, setLoaderVisible,\r\n    setRequestPending,\r\n    setTodos,\r\n    setToken\r\n} from \"./model\";\r\nimport {setPayload} from \"../../helpers/helpers\";\r\nimport {combine, sample} from \"effector\";\r\nimport {\r\n    addNewTaskFx,\r\n    addNewTodoFx, dragDropTaskFx,\r\n    getAllTodosFx,\r\n    removeTaskFx,\r\n    removeTodoFx,\r\n    renameTaskFx,\r\n    renameTodoFx\r\n} from \"../../api/todo-api\";\r\nimport {storageName} from \"../../hooks/useAuth\";\r\n\r\n\r\n$newTodoName.on(onNewTodoNameChange, setPayload);\r\n$token.on(setToken, setPayload);\r\n$todos.on(setTodos, setPayload);\r\n$authError.on(setAuthError, setPayload);\r\n$authMessage.on(setAuthMessage, setPayload);\r\n$isLoaderVisible.on(setLoaderVisible, setPayload);\r\n$isRequestPending.on(setRequestPending, setPayload);\r\n\r\n$newTodoName.reset(clearAddNewTodoName);\r\n\r\nsample({\r\n    source: $token,\r\n    clock: getAllTodos,\r\n    target: getAllTodosFx,\r\n});\r\n\r\ngetAllTodosFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setLoaderVisible(true);\r\n    }\r\n\r\n});\r\n\r\ngetAllTodosFx.done.watch((result) => {\r\n    if (result) {\r\n        setTodos(result.result.reverse().map((todo: any) => ({...todo, tasks: todo.tasks.reverse()})));\r\n        setAuthError(null);\r\n        setLoaderVisible(false);\r\n    }\r\n});\r\n\r\ngetAllTodosFx.fail.watch((error) => {\r\n    if (error.error.message === 'No authorization') {\r\n        setAuthError(error.error.message);\r\n        localStorage.removeItem(storageName);\r\n        setLoaderVisible(false);\r\n    }\r\n});\r\n\r\n\r\nsample({\r\n    source: combine($newTodoName, $token),\r\n    clock: onAddNewTodo,\r\n    target: addNewTodoFx,\r\n});\r\n\r\naddNewTodoFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\naddNewTodoFx.done.watch((result) => {\r\n    if (result) {\r\n        setTodos(result.result.allTodos.reverse().map((todo: any) => ({...todo, tasks: todo.tasks.reverse()})));\r\n        setRequestPending(false);\r\n    }\r\n    clearAddNewTodoName();\r\n});\r\naddNewTodoFx.fail.watch(() => {\r\n    setRequestPending(false);\r\n    clearAddNewTodoName();\r\n});\r\n\r\nsample({\r\n    source: $token,\r\n    clock: onRenameTodo,\r\n    fn: (token, clock) => ([token, clock]),\r\n    target: renameTodoFx,\r\n});\r\n\r\nrenameTodoFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\nrenameTodoFx.done.watch((result) => {\r\n    if (result && result.result && result.result.allTodos.length) {\r\n        getAllTodos();\r\n        setRequestPending(false);\r\n    }\r\n});\r\nrenameTodoFx.fail.watch((error) => {\r\n    setRequestPending(false);\r\n});\r\n\r\nsample({\r\n    source: $token,\r\n    clock: onRemoveTodo,\r\n    fn: (token, todoId) => ([token, todoId]),\r\n    target: removeTodoFx,\r\n});\r\n\r\nremoveTodoFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\nremoveTodoFx.done.watch((result) => {\r\n    if (result) {\r\n        setTodos(result.result.remainingTodos.reverse().map((todo: any) => ({...todo, tasks: todo.tasks.reverse()})));\r\n        setRequestPending(false);\r\n    }\r\n});\r\nremoveTodoFx.fail.watch((error) => {\r\n    setRequestPending(false);\r\n});\r\n\r\n\r\nsample({\r\n    source: $token,\r\n    clock: onAddNewTask,\r\n    fn: (token, clock) => ([token, clock]),\r\n    target: addNewTaskFx,\r\n});\r\n\r\naddNewTaskFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\naddNewTaskFx.done.watch((result) => {\r\n    if (result && result.result && result.result.allTasks.length) {\r\n        getAllTodos();\r\n        setRequestPending(false);\r\n    }\r\n});\r\naddNewTaskFx.fail.watch((error) => {\r\n    setRequestPending(false);\r\n});\r\n\r\nsample({\r\n    source: $token,\r\n    clock: onRemoveTask,\r\n    fn: (token, clock) => ([token, clock]),\r\n    target: removeTaskFx,\r\n});\r\n\r\nremoveTaskFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\nremoveTaskFx.done.watch((result) => {\r\n    if (result && result.result && result.result.remainingTasks) {\r\n        getAllTodos();\r\n        setRequestPending(false);\r\n    }\r\n});\r\nremoveTaskFx.fail.watch((error) => {\r\n    setRequestPending(false);\r\n});\r\n\r\n\r\nsample({\r\n    source: $token,\r\n    clock: onRenameTask,\r\n    fn: (token, clock) => ([token, clock]),\r\n    target: renameTaskFx,\r\n});\r\n\r\nrenameTaskFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\nrenameTaskFx.done.watch((result) => {\r\n    if (result && result.result && result.result.allTasks.length) {\r\n        getAllTodos();\r\n        setRequestPending(false);\r\n    }\r\n});\r\nrenameTaskFx.fail.watch((error) => {\r\n    setRequestPending(false);\r\n});\r\n\r\nsample({\r\n    source: $token,\r\n    clock: onDragDropTask,\r\n    fn: (token, clock) => ([token, clock]),\r\n    target: dragDropTaskFx,\r\n});\r\n\r\ndragDropTaskFx.pending.watch((pending) => {\r\n    if (pending) {\r\n        setRequestPending(true);\r\n    }\r\n});\r\n\r\ndragDropTaskFx.done.watch((result) => {\r\n    if (result && result.result && result.result.allTodos.length) {\r\n        setTodos(result.result.allTodos.reverse().map((todo: any) => ({...todo, tasks: todo.tasks.reverse()})));\r\n        setRequestPending(false);\r\n    }\r\n});\r\ndragDropTaskFx.fail.watch((error) => {\r\n    setRequestPending(false);\r\n});\r\n","import React from 'react'\r\nimport styled from 'styled-components';\r\n\r\nconst LoaderWrapper = styled.div`\r\n  cursor: not-allowed;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\n\r\nexport const Loader = ({style}: any) => {\r\n    return (\r\n        <LoaderWrapper style={style}>\r\n            <svg width=\"100px\" height=\"100px\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n                <circle cx=\"50\" cy=\"50\" fill=\"none\" stroke=\"#0d9722\" strokeWidth=\"6\" r=\"35\"\r\n                        strokeDasharray=\"164.93361431346415 56.97787143782138\">\r\n                    <animateTransform attributeName=\"transform\" type=\"rotate\" repeatCount=\"indefinite\" dur=\"1s\"\r\n                                      values=\"0 50 50;360 50 50\" keyTimes=\"0;1\"/>\r\n                </circle>\r\n            </svg>\r\n        </LoaderWrapper>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport '../assets/styles/components/_linear.scss';\r\n\r\n\r\nexport const Linear = () => {\r\n    return (\r\n        <div className=\"linear-activity\">\r\n            <div className=\"indeterminate\"/>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, {ButtonHTMLAttributes, DetailedHTMLProps} from 'react'\r\nimport styled from 'styled-components';\r\nimport {COLORS} from \"../constants/styles\";\r\n\r\nconst CustomButton = styled.button`\r\n   cursor: ${({disabled}) => disabled ? 'not-allowed' : 'pointer'};\r\n   opacity: ${({disabled}) => disabled ? '0.1' : 'none'};\r\n   width: 40%;\r\n   height: 35px;\r\n   margin: 0 1.2em;\r\n   background-color: ${() => COLORS.green};\r\n   border: 0px;\r\n   color: #fff;\r\n   border-radius: 3px;\r\n   transition: background-color .2s ease-in-out 0s, border-color .2s ease-in-out 0s;\r\n   font-weight: 700;\r\n   font-size: 14px;\r\n   outline: none;\r\n   \r\n  &:hover {\r\n    opacity: 0.9;\r\n    opacity: ${({disabled}) => disabled ? '0.1' : '0.9'};\r\n  }\r\n`;\r\n\r\nexport const Button =\r\n    ({\r\n         placeholder,\r\n         id,\r\n         type,\r\n         name,\r\n         className,\r\n         value,\r\n         onClick,\r\n         style,\r\n         disabled,\r\n         children\r\n     }: InputPropsType) => {\r\n        return (\r\n            <CustomButton\r\n                placeholder={placeholder}\r\n                id={id}\r\n                type={type}\r\n                name={name}\r\n                className={className}\r\n                value={value}\r\n                onClick={onClick}\r\n                style={style}\r\n                disabled={disabled}\r\n            >{children}</CustomButton>\r\n        )\r\n    }\r\n\r\nexport type InputPropsType = DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>\r\n    & {};\r\n","import React, {MouseEvent, useContext, useEffect} from 'react';\r\nimport {AuthContext} from \"../context/AuthContext\";\r\nimport {Container as NativeContainer} from \"../components/Container\";\r\nimport {COLORS} from \"../constants/styles\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport '../assets/styles/components/_todos-page.scss';\r\nimport {Header} from \"../components/Header\";\r\nimport logo from \"../assets/images/logo.png\";\r\nimport grid from \"../assets/images/grid.png\";\r\nimport logout from \"../assets/images/logout.svg\";\r\nimport facebook from \"../assets/images/facebook.png\";\r\nimport vk from \"../assets/images/vk.png\";\r\nimport telegram from \"../assets/images/telegram.png\";\r\nimport {Todo} from \"../components/Todo\";\r\nimport {Input} from \"../components/Input\";\r\nimport '../assets/styles/components/_input.scss';\r\nimport {getInputValue} from \"../helpers/helpers\";\r\nimport {\r\n    $isLoaderVisible,\r\n    $isRequestPending,\r\n    $newTodoName,\r\n    $todos,\r\n    getAllTodos,\r\n    onAddNewTodo,\r\n    onNewTodoNameChange,\r\n    setToken\r\n} from \"../@/todos/model\";\r\nimport {useStore} from \"effector-react\";\r\nimport '../@/todos/init';\r\nimport styled from \"styled-components\";\r\nimport {Loader} from \"../components/Loader\";\r\nimport {Linear} from \"../components/Linear\";\r\nimport {Button as NativeButton} from \"../components/Button\";\r\n\r\nconst Container = styled(NativeContainer)`\r\n  color: #ffffff;\r\n  display: block;\r\n  height: unset;\r\n  min-height: calc(100vh - 120px);\r\n`;\r\nconst Button = styled(NativeButton)`\r\n    width: 140px;  \r\n    height: 40px;\r\n    background: #2b2bc6;\r\n    border-radius: 5px;\r\n    \r\n    ${({disabled}) => !disabled &&\r\n    `&:hover{\r\n    opacity: 0.7;\r\n    }`\r\n}\r\n`;\r\n\r\nexport function TodosPage() {\r\n    const auth = useContext(AuthContext);\r\n    const history = useHistory();\r\n    const isLoaderVisible = useStore($isLoaderVisible);\r\n    const isRequestPending = useStore($isRequestPending);\r\n    const todos = useStore($todos);\r\n    const newTodoName = useStore($newTodoName);\r\n    const handleNewTodoNameChange = onNewTodoNameChange.prepend(getInputValue);\r\n\r\n    if (auth && auth.token) {\r\n        setToken(auth.token)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        getAllTodos();\r\n    }, []);\r\n\r\n    const logoutHandler = (event: any) => {\r\n        event.preventDefault();\r\n        auth.logout();\r\n        history.push('/');\r\n    }\r\n\r\n    const addNewTodo = (e: MouseEvent<HTMLButtonElement>) => {\r\n        if(newTodoName.trim().length){\r\n            onAddNewTodo(e)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container className=\"container\" backgroundColor={COLORS.darkMain}>\r\n            <div className=\"todos-page-content\">\r\n                <Header className=\"header\">\r\n                    <div className=\"logo\">\r\n                        <img className=\"logo-icon\" src={logo} alt=\"Logo\"/>\r\n                        <a rel=\"noreferrer\" target={\"_blank\"}\r\n                           className=\"logo-text\" href=\"https://alexeygorbachevskiy.github.io/Portfolio\">Portfolio</a>\r\n                    </div>\r\n                    <div className=\"menu\">\r\n                        <img className=\"grid-icon\" src={grid} alt=\"Grid icon\"/>\r\n                        <span className=\"page-header\">Todo List</span>\r\n                    </div>\r\n                    <div className=\"user\">\r\n                        <img className=\"logout-icon\" src={logout} alt=\"Logout icon\"/>\r\n                        <a className=\"logout-link\" href=\"/\" onClick={logoutHandler}>Logout</a>\r\n                    </div>\r\n                </Header>\r\n                {\r\n                    isRequestPending &&\r\n                    <Linear/>\r\n                }\r\n\r\n                <div className=\"todos-wrapper\">\r\n                    <div className=\"todos-creator\">\r\n                        {/*<div className=\"todos-creator__label\">Cards</div>*/}\r\n                        <div className=\"todos-creator__create\">\r\n                            <Input className=\"input\" value={newTodoName} onChange={handleNewTodoNameChange}/>\r\n                            <Button disabled={isRequestPending || isLoaderVisible} className=\"todos-creator__label\"\r\n                                    onClick={addNewTodo}>+ Create Todo</Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"todos\">\r\n                        {\r\n                            todos.map((todo) => {\r\n                                return (\r\n                                    <Todo key={todo.id} id={todo.id} tasks={todo.tasks} todoName={todo.name}/>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <Header className=\"footer\">\r\n                    <div className=\"links\">\r\n                        <img className=\"link\" src={facebook} alt=\"Facebook icon\"/>\r\n                        <img className=\"link vk\" src={vk} alt=\"VK icon\"/>\r\n                        <img className=\"link\" src={telegram} alt=\"Telegram icon\"/>\r\n                    </div>\r\n                    <div className=\"rights\">\r\n                        © 2021 - All Rights Lecensed\r\n                    </div>\r\n                    <div className=\"rights\">\r\n                        For commercial inquiries\r\n                    </div>\r\n                </Header>\r\n            </div>\r\n\r\n            {\r\n                isLoaderVisible &&\r\n                <Loader/>\r\n            }\r\n            {\r\n                !isLoaderVisible && !todos.length &&\r\n                    <div className=\"no-todos\">\r\n                        You don't have any todos now.\r\n                    </div>\r\n            }\r\n        </Container>\r\n    );\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABhSURBVHgB7dPBDYAwDAPAlEXp5mWDsoGJnxRayUh8opzUVy35kcQsKQDs/jqeGv/U3FtBw1xXc1SGAthCcUqONvtZvIJzkT0+5O58dnWyIVzJquYCQl7ykKO8ZLkgLzmgC0V7iapNDfdiAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAASCAYAAACw50UTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG2SURBVHgBrZVLUsJAEIa7J5Rrli7jDZKNVe7wBHAAIMPOBVByAuAE8rDckhQrV3oD4lJX8QTiDeIe0vbkwcvIpNC/KjUzPck3Tfd0g3CCGo2OFAIcAKwkFvIRaei6975a1evtSqkUhagWjtN5Qlzz5kOgAzeb3T4iDPJ36ZkPtHhcet70OoV3iYcwiqg3n09dOOoxzuC4FGeIiGWxYyyrD/lXzKS8MfO+EkJUQS/mCIefUQonf7uHkuhskX9IVNaRieCFvb523VFYinFIY6IsObHM9BDJIQtUDHn/XXmlgzPrQ4HVPIav1xwfESejlvO+pZLESaxBAbETX9k8hnOs74p4VQxOy2wuEgOM4Z9kGIa/B1eZ5UF7xwtoyfEO9uAqAZ43sTkZrb8coqp0b51NpGxXiMQCThdX5eRi17ApItUX+EYM4UQhRq1Dm7G7CIJX37YvP/lVk5fnUBgM3Jd+tg3j0BAEb4FtXz2mcAsKgSeD3L1sIuVtebVaWXyVuH+QBP29DzmBvTyPN/Akkdjf9matGKrqQoyyMv8VDlvPTW4ENS6oahpzM4Mlj/pDAO4vhquDZvoGGiun9WF7pTwAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAQCAYAAAAFzx/vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHfSURBVHgBrVQ7UgJBEO2ZxSpDQkO8gEigpmtmaq7umhn4wRMAJ/BHWWYOnABPIGRAWeUuF3CPgJklMm0332V3YLcsX7I1PTPv9eueXuE4Vx8AmIM5AiF+DpV69KYB1y1mETWdgyxEIITeV6rajMYd5+KVdu1wbDjUh5LEoiQ5rTNuOKDUbR8RXsCA4VDkorGjo3M7KsbIZKAviagGsazBYVfhmJSyCClhWfImHsUmV4J4dMNwJ6u1XhBgl5RKAAk4Pr5w6bMdjQsxOOWvHNcfm/EDcBV1mQQ+Tw5KBq6KUk/BSHASqBnux1wmARFLkQfICJS6L08XI0GlHtRyl2c5SIGTk0sWK8Y5vvfDaznfwIqBh8Zh7RlWgEqYp9G6oeTKcbF5KWOC3Et6sXdxSmHTTE1E0dBTdoXG0odLOWMLL8YDju+GPvwJZKBcr98vVM4KLzyv/VUo7PiUhwv/ACqpnc/vge93WkbBsWg3KBT22LkNqYCK+n+NKAim+VsUtUwUntdpphXVGu7q9WqDCBvL7rDo1tbuZ6/XbVvLiNKK8j+WiLykO2T/gNrVkqvI+JUJITdNM7r6DlTMyYmSlURAD6nv+90aZzfpE2Njsh1IOah43lt/8c7MKfd0fb4j4BcywNKZTDb6xAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGZSURBVHgBpZPNVcJAEMdndrcA7AA7gArECuDM42O98hCwgtCBiB68uVQgdkAJoQJjB5x5yY6z5OOZGCDo/5C82Z385r+zE4R/SutZLYoiLQS0AbCO8Ed1u6OGUqqNCDMOa/Eq+gouVK83bkmJHn/cKu4R0VcloDuWtXaad3NQwBif4Z0EuFFV3BDZFhaaw/ETgF0Tifd0TUry8QI3mStEexeGUJNSvP3MQRRXquBmmrgpAyWuxNxaaEsJpljImMVO9fv37sqHZU0uujLmZTMYTJz7RTGBCLbuLVjeKZhzxUdpJjCvDJbIdw+FiLfc3BZXKLrMXLkggc2PFRbCHoC5S+ELqQNEDMdHxD27eg2qwOKT7K9dfm5suKkOYBjQQFR153I4nPJNkobT2qXF1RH7a2tFR+vRjodVw1mRn31btu36xr29CUNRgwriFm1PAuMk2vJcDtM4nkEMynL5RJsqQE5CHcPowZjljF03eWf9O1sFWeFjQPcL8l/zGcOeTX5vMucx89J4tVriWeA5aT3uEEkeL/pw7tP1b4uQtLdDMK0sAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/logo.a4857edf.jpg\";","export default __webpack_public_path__ + \"static/media/left.636c3f10.png\";","export default __webpack_public_path__ + \"static/media/right.b3131fd5.png\";","import React, {useContext, useState} from 'react'\r\nimport {useFetch} from \"../hooks/useFetch\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\nimport {Input} from \"../components/Input\";\r\nimport {Container as NativeContainer} from \"../components/Container\";\r\nimport '../assets/styles/components/_auth-page.scss';\r\nimport '../assets/styles/components/_input.scss';\r\nimport '../assets/styles/components/_button.scss';\r\nimport {Button} from \"../components/Button\";\r\nimport logo from \"../assets/images/logo.jpg\";\r\nimport left from \"../assets/images/left.png\";\r\nimport right from \"../assets/images/right.png\";\r\nimport styled from \"styled-components\";\r\nimport {$authError, $authMessage, setAuthError, setAuthMessage} from \"../@/todos/model\";\r\nimport {useStore} from \"effector-react\";\r\nimport {Loader} from \"../components/Loader\";\r\n\r\nconst Container = styled(NativeContainer)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport const AuthPage = () => {\r\n    const auth = useContext(AuthContext);\r\n    const {loading, request} = useFetch();\r\n    const [form, setForm] = useState({\r\n        email: '', password: ''\r\n    });\r\n    const authMessage = useStore($authMessage);\r\n    const authError = useStore($authError);\r\n    const [isEmailError, setEmailError] = useState(false);\r\n    const [isPasswordError, setPasswordError] = useState(false);\r\n\r\n\r\n    const changeHandler = (event: any) => {\r\n        setAuthError(null);\r\n        setAuthMessage(null);\r\n        if (event.target.name === 'email') {\r\n            setEmailError(!event.target.value.trim().length)\r\n        }\r\n        if (event.target.name === 'password') {\r\n            setPasswordError(!event.target.value.trim().length)\r\n        }\r\n\r\n        setForm({...form, [event.target.name]: event.target.value})\r\n    }\r\n\r\n    const checkForEmpty = () => {\r\n        if (!form.email.trim().length && !form.password.trim().length) {\r\n            setEmailError(true);\r\n            setPasswordError(true);\r\n            return true;\r\n        }\r\n        if (!form.email.trim().length) {\r\n            setEmailError(true);\r\n            return true;\r\n        }\r\n        if (!form.password.trim().length) {\r\n            setPasswordError(true);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const registerHandler = async () => {\r\n        try {\r\n            setEmailError(false);\r\n            setPasswordError(false);\r\n            setAuthError(null);\r\n            setAuthMessage(null);\r\n            if (checkForEmpty()) {\r\n                return;\r\n            }\r\n\r\n            const data = await request('/api/auth/register', 'POST', {...form})\r\n            setAuthMessage(data.message);\r\n        } catch (e) {\r\n            setAuthError(e.message);\r\n        }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            setEmailError(false);\r\n            setPasswordError(false);\r\n            setAuthError(null);\r\n            setAuthMessage(null);\r\n            if (checkForEmpty()) {\r\n                return;\r\n            }\r\n            const data = await request('/api/auth/login', 'POST', {...form})\r\n            auth.login(data.token, data.userId)\r\n        } catch (e) {\r\n            setAuthError(e.message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container className=\"container\">\r\n            <div className=\"auth-page-content\">\r\n                <div className=\"logo-wrapper\">\r\n                    ToDo App\r\n                    <img className=\"logo\" src={logo} alt=\"Logo\"/>\r\n                </div>\r\n                <div className=\"login-form\" style={loading ? {opacity: 0.5} : {}}>\r\n                    <h1 className=\"login-header\">Sign In to App</h1>\r\n                    <div className=\"inputs-wrapper\">\r\n\r\n                        <Input\r\n                            placeholder=\"Type email\"\r\n                            id=\"email\"\r\n                            type=\"text\"\r\n                            name=\"email\"\r\n                            className=\"input\"\r\n                            value={form.email}\r\n                            onChange={changeHandler}\r\n                            style={isEmailError ? {borderColor: 'red'} : {}}\r\n                        />\r\n                        {\r\n                            isEmailError &&\r\n                            <span className=\"input-error\">\r\n                                Email field is required\r\n                            </span>\r\n                        }\r\n\r\n                        <Input\r\n                            placeholder=\"Type password\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            className=\"input\"\r\n                            value={form.password}\r\n                            onChange={changeHandler}\r\n                            style={isPasswordError ? {borderColor: 'red'} : {}}\r\n                        />\r\n                        {\r\n                            isPasswordError &&\r\n                            <span className=\"input-error\">\r\n                            Password field is required\r\n                        </span>\r\n                        }\r\n\r\n                        {\r\n                            authMessage &&\r\n                            <div className=\"message-container\">\r\n                                {authMessage}\r\n                            </div>\r\n                        }\r\n                        {\r\n                            authError &&\r\n                            <div className=\"error-container\">\r\n                                {authError}\r\n                            </div>\r\n                        }\r\n\r\n\r\n                    </div>\r\n                    <div className=\"buttons-wrapper\">\r\n                        <Button\r\n                            className=\"button\"\r\n                            disabled={loading || isEmailError || isPasswordError}\r\n                            onClick={loginHandler}\r\n                        >\r\n                            Sign In\r\n                        </Button>\r\n                        <Button\r\n                            className=\"button\"\r\n                            onClick={registerHandler}\r\n                            disabled={loading || isEmailError || isPasswordError}\r\n                        >\r\n                            Sign Up\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n                <img className=\"left\" src={left} alt=\"Left image\"/>\r\n                <img className=\"right\" src={right} alt=\"Right image\"/>\r\n            </div>\r\n\r\n            {\r\n                loading &&\r\n                <Loader style={{position: 'absolute'}}/>\r\n            }\r\n        </Container>\r\n    )\r\n}\r\n","import {useCallback, useState} from \"react\";\r\n\r\n\r\nexport const useFetch = () => {\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [error, setError] = useState<null | string>(null);\r\n\r\n    const request = useCallback(async (url:string, method = 'GET', body = null as null | Object, headers: any = {}) => {\r\n        setLoading(true);\r\n        try {\r\n            if (body) {\r\n                body = JSON.stringify(body);\r\n                headers['Content-Type'] = 'application/json';\r\n            }\r\n\r\n            const response = await fetch(`https://todo-backend-node-js.herokuapp.com${url}`, {method, body, headers});\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.message || 'Error is occurred');\r\n            }\r\n\r\n            setLoading(false);\r\n\r\n            return data;\r\n        } catch (e) {\r\n            setLoading(false);\r\n            setError(e.message);\r\n            throw e;\r\n        }\r\n    }, []);\r\n\r\n    const clearError = useCallback(() => setError(null), []);\r\n\r\n    return { loading, request, error, clearError };\r\n}\r\n","import React from 'react'\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport {useRoutes} from './routes'\nimport {AuthContext} from './context/AuthContext'\nimport {useAuth} from \"./hooks/useAuth\";\nimport {Loader} from \"./components/Loader\";\nimport {Container} from \"./components/Container\";\nimport {$authError, setToken} from \"./@/todos/model\";\nimport {useStore} from \"effector-react\";\n\nfunction App() {\n    const {token, login, logout, userId, ready} = useAuth();\n    const authError = useStore($authError);\n    const isAuthenticated = !!token && !authError;\n    const routes = useRoutes(isAuthenticated);\n\n    if(token){\n        setToken(token);\n    }\n\n    if (!ready) {\n        return (\n            <Container>\n                <Loader/>\n            </Container>\n        )\n    }\n\n    return (\n        <AuthContext.Provider value={{\n            token, login, logout, userId, isAuthenticated\n        }}>\n            <Router>\n                {routes}\n            </Router>\n        </AuthContext.Provider>\n    )\n}\n\nexport default App\n","import React from 'react';\r\nimport {Switch, Route, Redirect} from 'react-router';\r\nimport {TodosPage} from './pages/TodosPage';\r\nimport {AuthPage} from './pages/AuthPage';\r\n\r\nexport const useRoutes = (isAuthenticated: boolean) => {\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/todos\" exact>\r\n                    <TodosPage/>\r\n                </Route>\r\n                <Redirect to=\"/todos\" />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <AuthPage/>\r\n            </Route>\r\n            <Redirect to=\"/\" />\r\n        </Switch>\r\n    )\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}